import{_ as W,W as g,A as D,$ as n,l as U,a as E,m as F,L as o,b as f}from"./index.BwRYoQdY.js";import{a as I,b as M,aX as k,ae as T,B as c,bK as h,F as V,b5 as w,af as s,N as x,bi as m,u as r,ac as P}from"./@vue.CEj65B4J.js";import"./pinia.DyEYotLL.js";import"./vue-i18n.V-mnkcfJ.js";import"./@intlify.CFBz4lvk.js";import"./vue.Bt964zJg.js";import"./axios.CCb-kr4I.js";import"./qs.CHplBCRq.js";import"./side-channel.CsnL200x.js";import"./get-intrinsic.C0MK_WYI.js";import"./es-errors.DzOT6E3C.js";import"./has-symbols.eVqrYdw7.js";import"./has-proto.JnoBQRdH.js";import"./function-bind.BbkWVFrm.js";import"./hasown.DgGsgJXN.js";import"./call-bind.7ruBWERj.js";import"./set-function-length.rrBIZaM4.js";import"./define-data-property.CIp1FJ4J.js";import"./es-define-property.CCuWKFzr.js";import"./gopd.DEgEFyBv.js";import"./has-property-descriptors.BtWDufvq.js";import"./object-inspect.DozCNi1U.js";import"./numeral.DpTcJ6QL.js";import"./dayjs.BiyowgzP.js";import"./ethers.BW-Kzg1t.js";import"./@noble.CqNEeIzD.js";import"./@adraffy.-FYt1KqO.js";import"./vue-router.BQMrgPxf.js";import"./vant.Dep4x9SY.js";import"./@vant.BfKuOjy2.js";import"./vue-clipboard3.B7p_WyVT.js";import"./clipboard.CEP45nqx.js";import"./qrcode.vue.DUx8MS1K.js";const R=""+new URL("../png/USDT.DWhOmRk5.png",import.meta.url).href,q={class:"flex-row"},K={class:"flex-1 flex-col"},X={class:"flex-row"},j={class:"hb-card-content"},z={class:"flex-1 flex-row"},G=["src"],H={class:"label-value"},J={class:"v-progress"},Q={class:"flex-row flex-center"},Y={key:1},Z={class:"flex-row"},tt={class:""},st={class:""},ot={class:"flex-label"},et=["src"],nt={class:"flex-label"},it={class:"label-value"},at={class:"flex-label"},rt={class:"label-value"},lt={__name:"white-index",setup(ct){const{formatUnits:y,formatPrice:b}=E,{miner_bg:$}=F,{isLogin:C}=g,i=I({count:0,progress:0,sum:1e3,isActive:!1});let e;const A=async()=>{const t=await(await g.contractWhite()).isActive();i.isActive=t},B=()=>{D.progress().then(a=>{if((a==null?void 0:a.code)===200){const{data:t}=a,l=new Date("2025-03-09 21:15:00").getTime(),_=new Date().getTime()-l,d=Math.floor(_/36600),p=d<=300?d:300,v=Math.floor(p/1e3*100*100)/100;_>=0&&p<=300?(i.count=t.count+(p<=300?p:300),i.progress=(t==null?void 0:t.progress)+(p<=300?v:30),i.sum=t.sum):(i.count=t.count,i.progress=(t==null?void 0:t.progress)||0,i.sum=t.sum)}}),C.value&&A()};g.emit=()=>{B()},B(),M(()=>{g.emit=()=>{}});const S=async()=>{o.buttonOkCel=!1,o.onOk=void 0;try{const{provider:a}=g,t=await a.getSigner(),u=await(await g.contractWhite(t)).IDO();e=new f(e),o.msgList.push({msg:n("lang033"),status:e.status}),u.wait(),e=new f(e),o.msgList.push({msg:n("lang103")}),i.isActive=!0,e.onClose(),o.isButton=!0}catch{e==null||e.onErr(),o.msgList.push({msg:n("lang049"),err:1}),o.isButton=!0}},N=async()=>{if(o.show=!0,o.timerOut=!1,i.count>=i.sum)return o.msgList.push({msg:"max number",err}),o.isButton=!0,!1;try{e=new f;const a=await g.contractWhite(),t=await a.isActive();if(console.log("isActive",t),t)return o.msgList.push({msg:n("lang027")}),o.isButton=!0,!1;const l=await a.balanceOf(),u=Number(y(l,18));if(console.log("usdt",u),u<100)return o.msgList.push({msg:`${n("lang006")}:${u}`,err:1}),o.isButton=!0,!1;o.msgList.push({msg:`USDT:${u}`});const _=await a.allowance(),d=Number(y(_,18));o.msgList.push({msg:`${n("lang016")}:${d},${n("lang115")}:100`});const{provider:p}=g,v=await p.getSigner();if(d<100){e=new f;const L=await g.contractWhite(v);o.msgList.push({msg:n("lang060"),status:e.status});const O=await L.approve(100);e=new f(e),o.msgList.push({msg:n("lang033"),status:e.status}),await O.wait(),e.onClose(),o.msgList.push({msg:n("lang091")})}else o.msgList.push({msg:n("lang092")});e=new f(e),o.msgList.push({msg:n("lang034"),status:e.status}),o.textOk="lang063",o.onOk=async()=>{await S()},o.buttonOkCel=!0}catch(a){console.log("err",a),e==null||e.onErr(),o.msgList.push({msg:n("lang049"),err:1}),o.isButton=!0}};return(a,t)=>{const l=w("app-space"),u=w("van-rolling-text"),_=w("van-progress"),d=w("app-button"),p=w("hb-unlink"),v=w("hb-card-down");return k(),T(V,null,[c(l),c(v,null,{hide:h(()=>[s("div",H,[c(u,{style:{color:"aquamarine"},"start-num":0,"target-num":i.count,direction:"up"},null,8,["target-num"]),x(" /"+m(r(b)(Number(i.sum),0)),1)]),c(l),s("div",J,[c(_,{"stroke-width":"38px",style:{width:"100%"},percentage:i.progress,"pivot-text":`${r(b)(i.progress,1)}%`,"pivot-color":"#7232dd","track-color":"rgba(0,0,0,0.5)",color:"linear-gradient(to right, #C94962, #1E21FA)"},null,8,["percentage","pivot-text"])]),c(l),s("div",Q,[c(p,{"is-button":"","is-white":"",onOnLogin:t[1]||(t[1]=L=>A())},{default:h(()=>[i.isActive?(k(),T("span",Y,m(r(n)("lang028")),1)):(k(),P(d,{key:0,disabled:i.count>=1e3,width:"150px",onClick:t[0]||(t[0]=L=>N())},{default:h(()=>[x(m(r(n)("lang093")),1)]),_:1},8,["disabled"]))]),_:1})])]),default:h(()=>[s("div",q,[s("div",K,[t[2]||(t[2]=s("div",{class:"flex-1"},null,-1)),s("div",X,"SEC "+m(r(n)("lang077")),1),c(l),s("div",j,m(r(n)("lang056")),1),t[3]||(t[3]=s("div",{class:"flex-1"},null,-1))]),s("div",z,[t[4]||(t[4]=s("div",{class:"flex-1"},null,-1)),s("img",{height:"120px",src:r($)[1]},null,8,G)])])]),_:1}),c(l),c(v,{class:"sub-white"},{hide:h(()=>[s("div",tt,m(r(n)("lang069")),1),t[9]||(t[9]=s("div",{class:"flex-label"},[s("span",{class:"label-value"},"100"),s("div",{class:"flex-1"}),s("img",{class:"index-icon",style:{height:"30px"},src:R})],-1)),s("div",st,m(r(n)("lang051"))+"(SEC) ",1),s("div",ot,[t[5]||(t[5]=s("span",{class:"label-value"},"???",-1)),t[6]||(t[6]=s("div",{class:"flex-1"},null,-1)),s("img",{class:"index-icon",style:{height:"30px"},src:r(U)},null,8,et)]),c(l,{padding:"10px"}),s("div",nt,[x(m(r(n)("lang058"))+" ",1),t[7]||(t[7]=s("div",{class:"flex-1"},null,-1)),s("span",it,m(r(b)(i.progress))+"%",1)]),c(l,{padding:"10px"}),s("div",at,[x(m(r(n)("lang130"))+" ",1),t[8]||(t[8]=s("div",{class:"flex-1"},null,-1)),s("span",rt,m(r(b)(Number(i.sum),0)),1)])]),default:h(()=>[s("div",Z,m(r(n)("lang008")),1)]),_:1})],64)}}},qt=W(lt,[["__scopeId","data-v-bbd20f00"]]);export{qt as default};
